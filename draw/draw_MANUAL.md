# DESU™ draw ユーザーガイド (User Manual)

シンプルなWebベースのドローイングツール。レイヤー対応。

## ✏️ 描画ツール
左下のペンアイコンをタップで切替。**長押し**でサブツール選択メニューを表示。

*   **ペン**: フリーハンドで線を描画。ブラシサイズ変更可能。
*   **塗りつぶし**: 投げ縄で囲んだ範囲を塗りつぶし。**タップ**すると、タップ箇所の同色領域をフラッドフィル（バケツ塗り）。
*   **トーン**: 投げ縄で囲んだ範囲をスクリーントーンで塗りつぶし。**タップ**すると同色領域をトーンでフラッドフィル。トーンパターンはメニューから選択可能（📌ピンで固定表示）。
*   **スケッチ**: 投げ縄で囲んだ範囲を薄く塗りつぶし。重ねると濃くなる。**タップ**すると同色領域を薄くフラッドフィル。

## 🧹 消しゴム
消しゴムアイコンをタップで切替。**長押し**でサブツール選択メニュー。

*   **ペン消し**: なぞった部分を消去。ブラシサイズ変更可能。
*   **投げ縄消し**: 囲んだ範囲を消去。**タップ**するとタップ箇所の同色領域を透明でフラッドフィル（一括消去）。
*   **レイヤークリア**: 選択中のレイヤーを全消去。

## 📐 ブラシサイズ
左下のスライダーでペン・ペン消しゴムの太さを調整（1〜20）。
※ 投げ縄系ツール使用時はスライダー無効。

## 🎨 背景色
左下のカラーピッカーで背景色を変更。

## 📑 レイヤー
左下の `+` ボタンでレイヤー追加。レイヤーボタンを**長押し**で操作メニュー：
*   **不透明度スライダー**: レイヤーの透明度を調整。
*   **👁 表示/非表示**: レイヤーの表示を切替。
*   **▲▼ 順序変更**: レイヤーの上下移動。
*   **⬇ 統合**: 下のレイヤーに統合。
*   **✕ 削除**: レイヤーを削除（1枚のみの場合は不可）。

## 💾 保存
右上の ⬇ アイコンをタップ。
*   **全体を保存**: キャンバス全体をPNG保存。
*   **範囲選択**: ドラッグで範囲を指定 → 確定 → 保存 or コピー。
*   **縦横比**: 自由 / 1:1 / 4:5 / 16:9 / 9:16。
*   **倍率**: 1x / 2x / 3x。
*   **背景透過**: チェックで透過PNG出力。

## 📁 ファイル管理
右上のファイルアイコンをタップ。
*   **NEW**: 新規プロジェクト。
*   **SAVE (.json)**: レイヤー構成ごとプロジェクト保存。
*   **LOAD**: JSONファイルから復元。

## 🔍 ズーム & パン
*   **ピンチ**: ズーム。
*   **2本指ドラッグ**: パン。
*   **`Space` + ドラッグ**: パン（PC）。
*   **マウスホイール**: ズーム。
*   右下の `⊕` ボタンでズームリセット。

## ↩️ Undo / Redo
*   **2本指タップ**: Undo。
*   **3本指タップ**: Redo。

## 🤖 AI 監視モード (試験中)
右上の ⚙️ アイコンから設定。描画をライブ監視し、状況に合わせてAIがコメントします。
*   **LIVE**: 自動的にキャンバスを監視し、一定間隔でコメント。
*   **MANUAL**: 自動監視を停止。チャット入力時のみ反応。
*   **音声入力**: マイクボタンをタップして喋ると、音声をテキスト化して送信。
*   **人格設定**: キャラ設定や表示名を自由に変更可能。
*   **履歴リセット**: オプションから「これまでの会話を忘れる」でログを消去。

## ⌨️ キーボードショートカット
| キー | 機能 |
|---|---|
| `⌘/Ctrl + Z` | 元に戻す (Undo) |
| `⌘/Ctrl + Shift + Z` / `⌘/Ctrl + Y` | やり直し (Redo) |
| `⌘/Ctrl + S` | 保存UIを開く |
| `Delete` / `Backspace` | 全消去 |
| `X` | 描画 ↔ 消しゴム 切替 |
| `+` / `=` | ズームイン |
| `-` | ズームアウト |
| `0` | ズームリセット |
| `Space` (長押し) | パンモード |
| `1`〜`5` | レイヤー切替 |
| `V` | マイク入力を開始/停止 |
