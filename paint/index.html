<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>DESU‚Ñ¢ paint</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="light">
    <canvas id="canvas"></canvas>
    <canvas id="lasso-canvas"></canvas>

    <!-- Â∑¶‰∏ã„ÉÑ„Éº„É´„Éê„Éº -->
    <div id="toolbar-left">
        <div class="tool-btn active" id="penBtn" data-tool="pen">
            <svg viewBox="0 0 24 24">
                <path d="M4 18 Q8 8 12 12 Q16 16 20 6" fill="none"/>
            </svg>
        </div>
        <div class="tool-btn" id="fillBtn" data-tool="fill">
            <svg viewBox="0 0 24 24">
                <path d="M6 8 L10 4 L18 12 L14 16 Z" class="filled"/>
                <path d="M16 16 Q18 18 17 21 Q16 24 15 21 Q14 18 16 16 Z" class="filled"/>
            </svg>
        </div>
        <div class="tool-btn" id="colorBtn">
            <svg viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="8" id="colorCircle" class="filled"/>
            </svg>
        </div>
        <div id="size-slider-container">
            <input type="range" id="brushSize" min="1" max="20" value="1">
            <span id="sizeDisplay">1</span>
        </div>
        <div class="tool-btn" id="noiseBtn">
            <svg viewBox="0 0 24 24">
                <!-- È†≠ËìãÈ™® -->
                <ellipse cx="12" cy="10" rx="6" ry="7" class="filled"/>
                <!-- ‰∏ãÈ°é -->
                <rect x="8" y="15" width="8" height="4" rx="1" class="filled"/>
                <!-- ÁõÆ -->
                <ellipse cx="9.5" cy="9" rx="1.5" ry="2" fill="white"/>
                <ellipse cx="14.5" cy="9" rx="1.5" ry="2" fill="white"/>
                <!-- Èºª -->
                <path d="M11 12 L12 14 L13 12 Z" fill="white"/>
                <!-- Ê≠Ø -->
                <line x1="9" y1="17" x2="9" y2="19" stroke="white" stroke-width="0.8"/>
                <line x1="11" y1="17" x2="11" y2="19" stroke="white" stroke-width="0.8"/>
                <line x1="13" y1="17" x2="13" y2="19" stroke="white" stroke-width="0.8"/>
                <line x1="15" y1="17" x2="15" y2="19" stroke="white" stroke-width="0.8"/>
            </svg>
        </div>
    </div>

    <!-- Âè≥‰∏ä„ÉÑ„Éº„É´„Éê„Éº -->
    <div id="toolbar-right">
        <div class="tool-btn" id="saveBtn">
            <svg viewBox="0 0 24 24">
                <path d="M12 4 L12 16 M6 12 L12 18 L18 12"/>
                <path d="M4 20 L20 20"/>
            </svg>
        </div>
        <div class="tool-btn" id="clearBtn">
            <svg viewBox="0 0 24 24">
                <path d="M12 4 L12 2 M12 22 L12 20 M4 12 L2 12 M22 12 L20 12 M6.34 6.34 L4.93 4.93 M19.07 19.07 L17.66 17.66 M6.34 17.66 L4.93 19.07 M19.07 4.93 L17.66 6.34"/>
            </svg>
        </div>
        <div class="tool-btn" id="invertBtn">
            <svg viewBox="0 0 24 24">
                <path d="M12 4 A8 8 0 0 0 12 20 Z"/>
                <path d="M12 4 A8 8 0 0 1 12 20 Z" class="filled"/>
            </svg>
        </div>
    </div>

    <!-- „Ç∫„Éº„É†„É™„Çª„ÉÉ„Éà„Éú„Çø„É≥ -->
    <div id="resetZoomBtn">
        <svg viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="8"/>
            <path d="M12 7 L12 17 M7 12 L17 12"/>
        </svg>
    </div>

    <!-- ‰øùÂ≠òUI -->
    <div id="save-overlay"></div>
    <div id="save-ui">
        <h3>ÁØÑÂõ≤„Çí„Éâ„É©„ÉÉ„Ç∞„Åó„Å¶ÈÅ∏Êäû</h3>

        <div class="option-group">
            <div class="option-group-label">Á∏¶Ê®™ÊØî</div>
            <div class="option-buttons">
                <button class="option-btn active" data-aspect="free">Ëá™Áî±</button>
                <button class="option-btn" data-aspect="1:1">1:1</button>
                <button class="option-btn" data-aspect="4:5">4:5</button>
                <button class="option-btn" data-aspect="16:9">16:9</button>
                <button class="option-btn" data-aspect="9:16">9:16</button>
            </div>
        </div>

        <div class="option-group">
            <div class="option-group-label">ÂÄçÁéá</div>
            <div class="option-buttons">
                <button class="option-btn active" data-scale="1">1x</button>
                <button class="option-btn" data-scale="2">2x</button>
                <button class="option-btn" data-scale="3">3x</button>
            </div>
        </div>

        <div class="option-group">
            <div class="option-group-label">„Éé„Ç§„Ç∫</div>
            <div class="option-buttons">
                <button class="option-btn" data-noise="0">0</button>
                <button class="option-btn active" data-noise="1">1</button>
                <button class="option-btn" data-noise="2">2</button>
                <button class="option-btn" data-noise="3">3</button>
            </div>
        </div>

        <label>
            <input type="checkbox" id="transparentBg">
            ËÉåÊôØÈÄèÈÅé
        </label>

        <div>
            <button class="save-btn" id="saveAllBtn">ÂÖ®‰Ωì„Çí‰øùÂ≠ò</button>
            <button class="save-btn primary" id="confirmSelectionBtn" style="display:none;">Á¢∫ÂÆö</button>
            <button class="save-btn" id="copySelectionBtn" style="display:none;">„Ç≥„Éî„Éº</button>
            <button class="save-btn" id="redoSelectionBtn" style="display:none;">„ÇÑ„ÇäÁõ¥„Åó</button>
            <button class="save-btn" id="cancelSaveBtn">Èñâ„Åò„Çã</button>
        </div>
    </div>

    <canvas id="selection-canvas"></canvas>
    <div id="flash"></div>
    <div id="generating">
        <div><span class="spinner"></span>GIFÁîüÊàê‰∏≠...</div>
        <div id="progress-bar">
            <div id="progress-fill"></div>
        </div>
        <div id="progress-text">Ê∫ñÂÇô‰∏≠...</div>
    </div>

    <!-- „Éá„Éê„ÉÉ„Ç∞„É≠„Ç∞ -->
    <div id="debug-activator"></div>
    <div id="debug-toggle">üêõ</div>
    <div id="debug-log"></div>

    <!-- „ÇØ„É¨„Ç∏„ÉÉ„Éà„Éú„Çø„É≥„Å®„É¢„Éº„ÉÄ„É´ -->
    <div id="credit-btn">?</div>
    <div id="credit-modal">
        <div id="credit-content">
            <h2>DESU‚Ñ¢ paint</h2>
            <a href="https://warpshoot.github.io/desu/" target="_blank" id="credit-logo">
                <img src="https://warpshoot.github.io/desu/paint/logo.gif" alt="DESU paint Logo">
            </a>
            <div id="credit-author">
                by <a href="https://warpshoot.github.io/" target="_blank">wpy</a>
            </div>
        </div>
    </div>

    <!-- gif.js CDN -->
    <script src="https://unpkg.com/gif.js@0.2.0/dist/gif.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
